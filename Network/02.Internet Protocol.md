
# Giao thá»©c IP Protocol 
**Giao thá»©c IP(Internet Protocol)** lÃ  má»™t giao thá»©c thuá»™c chá»“ng giao thá»©c TCP/IP. Náº¿u tham chiáº¿u theo mÃ´ hÃ¬nh TCP/IP, giao thá»©c IP sáº½ náº±m á»Ÿ táº§ng 3, táº§ng Internet. LÃ  **giao thá»©c hÆ°á»›ng dá»¯ liá»‡u**, chÃºng sá»­ dá»¥ng má»™t Ä‘á»‹a chá»‰ logic gá»i lÃ  **Ä‘á»‹a chá»‰ IP** (IP Address). Má»—i thiáº¿t bá»‹ trong máº¡ng sáº½ Ä‘Æ°á»£c cáº¥p 1 Ä‘á»‹a chá»‰ IP. CÃ¡c mÃ¡y tÃ­nh trong máº¡ng sáº½ truyá»n thÃ´ng, giao tiáº¿p vá»›i nhau báº±ng cÃ¡ch sá»­ dá»¥ng Ä‘á»‹a chá»‰ IP Ä‘Ã³ Ä‘á»ƒ Ä‘á»‹nh danh mÃ¡y chá»§ nguá»“n vÃ  mÃ¡y chá»§ Ä‘Ã­ch. Náº¿u coi cÃ¡c thiáº¿t bá»‹ trong máº¡ng internet giá»‘ng nhÆ° lÃ  cÃ¡c ngÆ°á»i dÃ¹ng, trong trÆ°á»ng há»£p giáº£ sá»­ nhÆ° má»i ngÆ°á»i liÃªn láº¡c vá»›i nhau qua thÆ° tay, thÃ¬ IP cÃ³ thá»ƒ so sÃ¡nh nhÆ° Ä‘á»‹a chá»‰ nhÃ  cá»§a há». CÃ¡c Ä‘á»‹a chá»‰ nÃ y sáº½ gisup cho cÃ¡c nhÃ¢n viÃªn bÆ°u tÃ¡ cÃ³ thá»ƒ biáº¿t Ä‘Æ°á»£c Ä‘Ã¢u lÃ  Ä‘iá»ƒm Ä‘áº¿n cá»§a bá»©c thÆ°, cÅ©ng nhÆ° Ä‘Ã¢u lÃ  nÆ¡i gá»­i. Viá»‡c nÃ y giÃºp cho cÃ¡c hai ngÆ°á»i cÃ³ thá»ƒ gá»­i á»Ÿ báº¥t cá»© Ä‘Æ¡n vá»‹ giao váº­n thÆ° tÃ­n nÃ o. TÆ°Æ¡ng tá»±, sá»­ dá»¥ng IP giÃºp cho cÃ¡c thiáº¿t bá»‹ cÃ³ thá»ƒ dá»… dÃ ng gá»­i dá»¯ liá»‡u Ä‘i mÃ  khÃ´ng cáº§n pháº£i thiáº¿t láº­p má»™t Ä‘Æ°á»ng káº¿t ná»‘i cÃ³ sáºµn. Hiá»‡n nay cÃ³ hai phiÃªn báº£n cá»§a giao thá»©c IP Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng lÃ  IPv4 vÃ  IPv6.

## IPv4
**IPv4  hay Internet Protocol version 4, hoáº·c giao thá»©c IP tháº¿ há»‡ thá»© 4** lÃ  loáº¡i phá»• biáº¿n vÃ  Ä‘Ã£ sá»­ dá»¥ng tá»« thuá»Ÿ Ä‘áº§u. Giao thá»©c IPv4 cÃ³ má»™t sá»‘ Ä‘áº·c Ä‘iá»ƒm sau: 
-   LÃ  1 trong nhá»¯ng giao thá»©c quan trá»ng nháº¥t cá»§a bá»™ giao thá»©c TPC/IP.
-   LÃ  giao thá»©c hÆ°á»›ng khÃ´ng liÃªn káº¿t (connectionless): dá»¯ liá»‡u cá»§a IP Ä‘Æ°á»£c truyá»n Ä‘i ngay láº­p tá»©c náº¿u cÃ³ thá»ƒ (best effort), khÃ´ng cÃ³ báº¥t kÃ¬ cÆ¡ cháº¿ thiáº¿t láº­p káº¿t ná»‘i , khÃ´ng cÃ³ cÆ¡ cháº¿ bÃ¡o nháº­n hay Ä‘iá»u khiá»ƒn luá»“ng nÃ o Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i IP, cÃ¡c gÃ³i tin IP cÅ©ng khÃ´ng Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ thá»© tá»± khi trao Ä‘á»•i trÃªn máº¡ngâ€¦
-   Má»—i gÃ³i tin IP Ä‘Æ°á»£c xá»­ lÃ½ má»™t cÃ¡ch hoÃ n toÃ n Ä‘á»™c láº­p vá»›i cÃ¡c gÃ³i tin IP khÃ¡c .
-   Giao thá»©c IP sá»­ dá»¥ng cÆ¡ cháº¿ Ä‘á»‹nh Ä‘á»‹a chá»‰ theo kiá»ƒu phÃ¢n cáº¥p, trong Ä‘Ã³ pháº§n NetworkID cá»§a Ä‘á»‹a chá»‰ giá»‘ng nhÆ° tÃªn cá»§a má»™t con Ä‘Æ°á»ng vÃ  pháº§n hostID cá»§a Ä‘á»‹a chá»‰ sáº½ lÃ  sá»‘ nhÃ  cá»§a má»™t cÄƒn nhÃ  trÃªn con Ä‘Æ°á»ng áº¥y.
-   KhÃ´ng cÃ³ cÆ¡ cháº¿ khÃ´i phá»¥c láº¡i gÃ³i tin bá»‹ máº¥t trÃªn Ä‘Æ°á»ng truyá»n. Viá»‡c nÃ y Ä‘Æ°á»£c giao láº¡i cho cÃ¡c giao thá»©c táº§ng trÃªn Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»™ tin cáº­y (TCP).

Header cá»§a IP Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong tÃ i liá»‡u RFC 791. 

![IPv4_Packet-en svg](https://user-images.githubusercontent.com/79156398/163294717-ca8a8db4-3e97-46af-b426-944532a76f28.png)

Trong Ä‘Ã³: 
-   **VERS (4 bit)**: chá»‰ ra phiÃªn báº£n hiá»‡n hÃ nh cá»§a IP Ä‘ang Ä‘Æ°á»£c dÃ¹ng, Náº¿u trÆ°á»ng nÃ y khÃ¡c vá»›i phiÃªn báº£n IP cá»§a thiáº¿t bá»‹ nháº­n, thiáº¿t bá»‹ nháº­n sáº½ tá»« chá»‘i vÃ  loáº¡i bá» cÃ¡c gÃ³i tin nÃ y.

-   **HLEN (IP Header Length - 4 bit):**  chá»‰ Ä‘á»™ dÃ i pháº§n tiÃªu Ä‘á» cá»§a datagram, tÃ­nh theo Ä‘Æ¡n vá»‹ word (32 bits). Náº¿u khÃ´ng cÃ³ trÆ°á»ng nÃ y thÃ¬ Ä‘á»™ dÃ i máº·c Ä‘á»‹nh cá»§a header lÃ  5 tá»«.

-   **Service Type (8 bit)**: Ä‘Ã¡nh dáº¥u dá»¯ liá»‡u (marking) phá»¥c vá»¥ cho tÃ¡c vá»¥ QoS vá»›i cÃ¡c gÃ³i tin IP.

-   **Precedence (3 bit)**: chá»‰ thá»‹ quyá»n Æ°u tiÃªn gá»­i datagram, cá»¥ thá»ƒ:

|Priority| Main|
| ----- | ------ |
| 111 | Network Control (cao nháº¥t) |
| 011 | flash |
| 110 | Internetwork Control |
| 010 | Immediate |
| 101 | CRITIC/ECP |
| 001 | Priority |
| 100 | Flas Override |
| 000 | Routine (tháº¥p nháº¥t) |

-   **Delay (1 bit)**  : chá»‰ Ä‘á»™ trá»… yÃªu cáº§u.  _0_: Ä‘á»™ trá»… bÃ¬nh thÆ°á»ng;  _1_: Ä‘á»™ trá»… tháº¥p
    
-   **Throughput (1 bit)**  : chá»‰ sá»‘ thÃ´ng lÆ°á»£ng yÃªu cáº§u.  _0_: thÃ´ng lÆ°á»£ng bÃ¬nh thÆ°á»ng;  _1_: thÃ´ng lÆ°á»£ng cao
    
-   **Reliability (1 bit)**: chá»‰ Ä‘á»™ tin cáº­y yÃªu cáº§u.  _0_: Ä‘á»™ tin cáº­y bÃ¬nh thÆ°á»ng;  _1_: Ä‘á»™ tin cáº­y cao
    
-   **Total Length (16 bit)**: chiá»u dÃ i cá»§a toÃ n bá»™ gÃ³i tin IP ká»ƒ cáº£ pháº§n header Ä‘Æ°á»£c tÃ­nh theo byte. Äá»ƒ biáº¿t chiá»u dÃ i cá»§a dá»¯ liá»‡u cáº§n láº¥y tá»•ng chiá»u dÃ i nÃ y trá»« Ä‘i HLEN.
    
-   **Identification (16 bit)**: TrÆ°á»ng Ä‘á»‹nh danh, cÃ¹ng cÃ¡c tham sá»‘ khÃ¡c nhÆ° Ä‘á»‹a chá»‰ nguá»“n (Source address) vÃ  Ä‘á»‹a chá»‰ Ä‘Ã­ch (Destination address) Ä‘á»ƒ Ä‘á»‹nh danh duy nháº¥t cho má»—i Datagram Ä‘Æ°á»£c gá»­i Ä‘i bá»Ÿi 1 tráº¡m. ThÃ´ng thÆ°á»ng pháº§n Ä‘á»‹nh danh Ä‘Æ°á»£c tÄƒng thÃªm 1 khi 1 Datagram Ä‘Æ°á»£c gá»­i Ä‘i.
    
-   **Flags (3 bit)**: Cá» sá»­ dá»¥ng trong khi phÃ¢n Ä‘oáº¡n cÃ¡c Datagram.
    
    -   Bit 0: reserved chÆ°a sá»­ dá»¥ng, giÃ¡ trá»‹ luÃ´n lÃ  0.
    -   Bit 1:  _DF = 1_: GÃ³i tin bá»‹ phÃ¢n Ä‘oáº¡n, cÃ³ nhiá»u hÆ¡n 1 Ä‘oáº¡n,  _DF = 0_: GÃ³i tin ko bá»‹ phÃ¢n Ä‘oáº¡n.
    -   Bit 2:  _MF = 0:_  Ä‘oáº¡n cuá»‘i cÃ¹ng,  _MF = 1_: chÆ°a lÃ  Ä‘oáº¡n cuá»‘i cÃ¹ng, cÃ²n Ä‘oáº¡n khÃ¡c phÃ­a sau ná»¯a.

-   **Fragment Offset (13 bit):**  Chá»‰ vá»‹ trÃ­ cá»§a Ä‘oáº¡n phÃ¢n máº£nh (Fragment) trong IP Datagram tÃ­nh theo Ä‘Æ¡n vá»‹ 64 Bit.
    
-   **Time to Live (TTL) (8 bit)**: sá»­ dá»¥ng Ä‘á»ƒ chá»‘ng loop gÃ³i tin IP khi xáº£y ra lá»—i Ä‘á»‹nh tuyáº¿n trÃªn sÆ¡ Ä‘á»“ máº¡ng. GiÃ¡ trá»‹ nÃ y Ä‘Æ°á»£c Ä‘áº·t lÃºc báº¯t Ä‘áº§u gá»­i gÃ³i tin vÃ  nÃ³ sáº½ giáº£m Ä‘i 1 Ä‘Æ¡n vá»‹ khi Ä‘i qua 1 router. Khi TTL = 0, gÃ³i tin sáº½ bá»‹ loáº¡i bá».
    
-   **Protocol (8 bit)**: nháº­n dáº¡ng giao thá»©c nÃ o Ä‘ang Ä‘Æ°á»£c truyá»n táº£i trong pháº§n data cá»§a gÃ³i tin IP, nhÆ° TCP hay UDP.
    
-   **Header checksum (8 bit)**: kiá»ƒm tra lá»—i cá»§a IP Header. Náº¿u nhÆ° viá»‡c kiá»ƒm tra nÃ y tháº¥t báº¡i, gÃ³i dá»¯ liá»‡u sáº½ bá»‹ huá»· bá» táº¡i nÆ¡i xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c lá»—i.
    
-   **Source Address (32 bit)**: Ä‘á»‹a chá»‰ cá»§a tráº¡m nguá»“n.
    
-   **Destination Address (32 bit)**: Ä‘á»‹a chá»‰ cá»§a tráº¡m Ä‘Ã­ch.
    
-   **Option (cÃ³ Ä‘á»™ dÃ i thay Ä‘á»•i)**: cho phÃ©p thÃªm vÃ o tÃ­nh nÄƒng má»›i cho giao thá»©c IP.
    
-   **Padding (Ä‘á»™ dÃ i thay Ä‘á»•i)**: Cáº¥u trÃºc cá»§a gÃ³i IP quy Ä‘á»‹nh option pháº£i lÃ  bá»™i sá»‘ cá»§a 32 bit nÃªn náº¿u option khÃ´ng Ä‘á»§ sá»‘ bit , cÃ¡c bit padding sáº½ Ä‘Æ°á»£c thÃªm vÃ o Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c yÃªu cáº§u nÃ y .
    
-   **Data (Ä‘á»™ dÃ i thay Ä‘á»•i)**: vÃ¹ng dá»¯ liá»‡u cÃ³ Ä‘á»™ dÃ i lÃ  bá»™i cá»§a 8 bit, tá»‘i Ä‘a lÃ  65535 byte.

Äá»‹a chá»‰ IP Ä‘Æ°á»£c Ä‘á» cáº­p á»Ÿ trÆ°á»ng header. ChÃºng cÃ³ Ä‘á»™ dÃ i 32 bit. Äá»ƒ dá»… viáº¿t vÃ  hiá»ƒn thá»‹, 32 bit Ä‘Æ°á»£c chia thÃ nh 4 cá»¥m 8 bit, gá»i lÃ  cÃ¡c octet. CÃ¡c octet Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng sá»‘ tháº­p phÃ¢n phÃ¢n tÃ¡ch bá»Ÿi dáº¥u cháº¥m. Khi sá»­ dá»¥ng, chÃºng láº¡i Ä‘Æ°á»£c chia tiáº¿p thÃ nh 2 pháº§n: Network vÃ  host. Pháº§n network lÃ  pháº§n cá»‘ Ä‘á»‹nh tÆ°á»£ng trÆ°ng cho 1 máº¡ng, pháº§n host lÃ  pháº§n Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chia cho cÃ¡c mÃ¡y tÃ­nh sá»­ dá»¥ng trong máº¡ng Ä‘Ã³. 

![ViDuIP](https://user-images.githubusercontent.com/79156398/163294787-167fdb65-9cfa-4d01-a39e-bff3944c2ba1.png)

### Subnet mask 

Äá»ƒ phÃ¢n biá»‡t giá»¯a pháº§n network vÃ  pháº§n host trong Ä‘á»‹a chá»‰ IP. Subnet mask Ä‘Æ°á»£c sá»­ dá»¥ng. Subnet mask biá»ƒu thá»‹ sá»‘ bit Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m pháº§n network. Cá»© má»—i bit trong pháº§n network sáº½ tÆ°Æ¡ng á»©ng vá»›i bit 1 trong pháº§n subnet mask. Pháº§n cÃ²n láº¡i lÃ  hostID vá»›i bit 0. NhÆ° váº­y, subnet mask cÅ©ng cÃ³ Ä‘á»™ dÃ i 32 bit vá»›i 4 octet. Vá»›i vÃ­ dá»¥ trÃªn, trong Ä‘á»‹a chá»‰ IP máº«u, ta tháº¥y pháº§n network chiáº¿m 16 bit nÃªn subnet mask lÃ  1111 1111. 1111 1111. 0000 0000. 0000 0000 (tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i 255.255.0.0). NgoÃ i ra, ta cÃ³ thá»ƒ sá»­ dá»¥ng kÃ½ hiá»‡u `/` cÃ¹ng vá»›i sá»‘ lÆ°á»£ng bit pháº§n networkID á»Ÿ sau Ä‘á»‹a chá»‰ IP. VÃ­ dá»¥: 131.108.122.204/16

### Gateway, Broadcast address, Network address

**Gateway** lÃ  má»™t mÃ¡y tÃ­nh hoáº·c má»™t thiáº¿t bá»‹ Ä‘á»‹nh tuyáº¿n nhÆ° router, switch sá»­ dá»¥ng Ä‘á»ƒ quáº£n lÃ½ cÃ¡c mÃ¡y host trong má»™t máº¡ng. Táº¥t cáº£ cÃ¡c dá»¯ liá»‡u tá»« host sáº½ pháº£i Ä‘i qua gateway Ä‘á»ƒ xá»­ lÃ½ báº±ng cÃ¡ch Ä‘á»‹nh tuyáº¿n,..
**Äá»‹a chá»‰ quáº£ng bÃ¡**  hay **Broadcast address** thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng khi gateway muá»‘n gá»­i cÃ¡c gÃ³i tin broadcast - gÃ³i tin Ä‘áº¿n táº¥t cáº£ cÃ¡c host trong máº¡ng mÃ  gateway quáº£n lÃ½. Äá»‹a chá»‰ quáº£ng bÃ¡ cÃ³ táº¥t cáº£ cÃ¡c bit pháº§n hostID lÃ  1.
**Äá»‹a chá»‰ máº¡ng** hay **Network address** dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh danh cho má»™t máº¡ng. Äá»‹a chá»‰ máº¡ng cÃ³ táº¥t cáº£ cÃ¡c bit pháº§n hostID lÃ  0.

### CÃ¡c lá»›p Ä‘á»‹a chá»‰

KhÃ´ng gian Ä‘á»‹a chá»‰ IP Ä‘Æ°á»£c chia thÃ nh cÃ¡c lá»›p nhÆ° sau:

![cÃ¡c lá»›p Ä‘á»‹a chá»‰ ](https://user-images.githubusercontent.com/79156398/163294998-3d08ccf6-521e-449b-b84d-ce38ae6b9f7c.png)

#### Lá»›p A

-   Äá»‹a chá»‰ lá»›p A sá»­ dá»¥ng má»™t otet(8 bit) Ä‘áº§u lÃ m pháº§n máº¡ng, ba octet sau lÃ m pháº§n host
-   Bit Ä‘áº§u cá»§a má»™t Ä‘á»‹a chá»‰ lá»›p A luÃ´n Ä‘Æ°á»£c giá»¯ lÃ   _**0**_.
-   CÃ¡c Ä‘á»‹a chá»‰ lá»›p máº¡ng cá»§a lá»›p A gá»“m :  _**1.0.0.0 -> 126.0.0.0**_.
-   Máº¡ng  _**127.0.0.0**_  Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m  _**loopback**_
-   Pháº§n host cÃ³ 24 bit => má»—i máº¡ng lá»›p A cÃ³ (_**2^24 â€“ 2**_) host.

#### Lá»›p B

-   Äá»‹a chá»‰ lá»›p B sá»­ dá»¥ng hai octet Ä‘áº§u lÃ m pháº§n máº¡ng , hai octet sau lÃ m pháº§n host.
-   Hai bit Ä‘áº§u cá»§a má»™t Ä‘á»‹a chá»‰ lá»›p B luÃ´n Ä‘Æ°á»£c giá»¯ lÃ   _**1 0**_
-   CÃ¡c Ä‘á»‹a chá»‰ máº¡ng lá»›p B gá»“m :  _**128.0.0.0 -> 191.255.0.0**_  . CÃ³ táº¥t cáº£  _**2^14=16384**_  máº¡ng trong lá»›p B.
-   Pháº§n host dÃ i 16 bit => má»™t máº¡ng lá»›p B cÃ³ (_**2^16 â€“ 2 = 65534**_) host.

#### Lá»›p C

-   Äá»‹a chá»‰ lá»›p C sá»­ dá»¥ng 3 octet Ä‘áº§u lÃ m pháº§n máº¡ng , má»™t octet sau lÃ m pháº§n host.
-   Ba bit Ä‘áº§u cá»§a má»™t Ä‘á»‹a chá»‰ lá»›p C luÃ´n Ä‘Æ°á»£c giá»¯ lÃ   _**1 1 0**_.
-   CÃ¡c Ä‘á»‹a chá»‰ máº¡ng lá»›p C gá»“m :  _**192.0.0.0 -> 223.255.255.0**_. CÃ³ táº¥t cáº£  _**2^21**_  máº¡ng trong lá»›p C.
-   Pháº§n host dÃ i 8 bit do Ä‘Ã³ cÃ³ má»™t máº¡ng lá»›p C cÃ³ (_**28 â€“ 2 = 254**_) host.

#### Lá»›p D

-   Bá»‘n bit Ä‘áº§u cá»§a má»™t Ä‘á»‹a chá»‰ lá»›p D luÃ´n Ä‘Æ°á»£c giá»¯ lÃ   _**1 1 1 0**_
-   Gá»“m cÃ¡c Ä‘á»‹a chá»‰ thuá»™c dáº£i:  _**244.0.0.0 -> 239.255.255.255**_
-   ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ lÃ m Ä‘á»‹a chá»‰  _**multicast**_.

#### Lá»›p E

-   NÄƒm bit Ä‘áº§u cá»§a má»™t Ä‘á»‹a chá»‰ lá»›p E luÃ´n Ä‘Æ°á»£c giá»¯ lÃ   _**1 1 1 1**_
-   Äá»‹a chá»‰ thuá»™c dáº£i tá»«  _**240.0.0.0**_  trá»Ÿ Ä‘i
-   ÄÆ°á»£c sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch dá»± phÃ²ng.

**ChÃº Ã½:**

-   CÃ¡c lá»›p Ä‘á»‹a chá»‰ IP cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº·t cho cÃ¡c host lÃ  cÃ¡c lá»›p A,B,C
-   Äá»ƒ dá»… dÃ ng nháº­n diá»‡n má»™t Ä‘á»‹a chá»‰ IP thuá»™c lá»›p nÃ o , ta cÃ³ thá»ƒ quan sÃ¡t octet Ä‘áº§u cá»§a Ä‘á»‹a chá»‰ náº±m trong khoáº£ng giÃ¡ trá»‹:

|Äá»‹a chá»‰ lá»›p|Octet Ä‘áº§u cá»§a Ä‘á»‹a chá»‰|
|--|--|
|A|1 -> 126|
|B|128 -> 191|
|C|192 -> 223|
|D|224 -> 239|
|E|240 -> 255|

Tuy nhiÃªn viá»‡c phÃ¢n chia cá»©ng thÃ nh cÃ¡c lá»›p (A, B, C, D, E) lÃ m háº¡n cháº¿ viá»‡c sá»­ dá»¥ng toÃ n bá»™ khÃ´ng gian Ä‘á»‹a chá»‰ dáº«n Ä‘áº¿n lÃ£ng phÃ­ khÃ´ng gian Ä‘á»‹a chá»‰. Váº­y giáº£i phÃ¡p lÃ  gÃ¬ ğŸ¤”?  

ÄÃ³ chÃ­nh lÃ  IP Public, IP Private.

### Äá»‹a chá»‰ IP Public, IP Private
**Public IP** lÃ  Ä‘á»‹a chá»‰ Ä‘Æ°á»£c **ISP** (nhÃ  cung cáº¥p dá»‹ch vá»¥ Internet) cáº¥p vÃ  cÃ³ tháº¿ Ä‘Æ°á»£c "nhÃ¬n tháº¥y" vÃ  truy cáº­p tá»« Internet. Giá»‘ng nhÆ° Ä‘á»‹a chá»‰ nhÃ  dÃ¹ng Ä‘á»ƒ nháº­n thÆ° tÃ­n, bÆ°u pháº©m váº­y. Má»—i public IP chá»‰ tá»“n táº¡i Ä‘á»™c nháº¥t trÃªn máº¡ng Internet cho cáº£ toÃ n cáº§u, vÃ¬ Ä‘Ã³ khÃ´ng thá»ƒ tá»“n táº¡i hai thiáº¿t bá»‹ (server, mÃ¡y tÃ­nh, router,...) cÃ³ cÃ¹ng Ä‘á»‹a chá»‰ public IP.

**Private IP** lÃ  cÃ¡c Ä‘á»‹a chá»‰ Ä‘Æ°á»£c cáº¥p phÃ¡t bá»Ÿi InterNIC cho phÃ©p cÃ¡c cÃ´ng ty, tá»• chá»©c cÃ³ thá»ƒ táº¡o cho há» má»™t máº¡ng cá»¥c bá»™ riÃªng. CÃ³ ba dÃ£y IP á»Ÿ class A, class B vÃ  class C Ä‘Æ°á»£c IANA (Tá»• chá»©c cáº¥p phÃ¡t sá»‘ hiá»‡u trÃªn Internet) dÃ nh riÃªng Ä‘á»ƒ Ä‘Ã¡nh Ä‘á»‹a chá»‰ private IP.

|Lá»›p|Dáº£i Ä‘á»‹a chá»‰|Sá»‘ host|
|---|---|--|
|A|10,0.0.0 Ä‘áº¿n 10.255.255.255|16777216|
|B|172.16.0.0 Ä‘áº¿n 172.31.255.255|1048576|
|C|192.168.0.0 Ä‘áº¿n 192.168.255.255|65536|

### CÃ¡c háº¡n cháº¿ cá»§a IPv4

Hai háº¡n cháº¿ lá»›n nháº¥t cá»§a IPv4 chÃ­nh lÃ  báº£o máº­t vÃ  sá»± thiáº¿u há»¥t Ä‘á»‹a chá»‰. á» thá»i Ä‘iá»ƒm má»›i Ä‘Æ°á»£c táº¡o ra vÃ o tháº¿ ká»· trÆ°á»›c. IPv4 chá»‰ Ä‘Æ°á»£c chÃº trá»ng vÃ o viá»‡c thiáº¿t láº­p káº¿t ná»‘i, bá» qua báº£o máº­t. Khá»‘i lÆ°á»£ng Ä‘á»‹a chá»‰ vá»›i 32 bit, tÆ°Æ¡ng Ä‘Æ°Æ¡ng khoáº£ng 4 tá»‰ Ä‘á»‹a chá»‰ lÃ  vÃ´ cÃ¹ng thoáº£i mÃ¡i vÃ o thá»i Ä‘iá»ƒm Ä‘Ã³ vá»›i sá»‘ Ã­t cÃ¡c phÃ²ng nghiÃªn cá»©u, cÆ¡ quan quÃ¢n sá»± káº¿t ná»‘i tá»›i. NhÆ°ng vá»›i tá»‘c Ä‘á»™ phÃ¡t triá»ƒn chÃ³ng máº·t, sá»‘ lÆ°á»£ng cÃ¡c thiáº¿t bá»‹ máº¡ng tÄƒng vá»t. Sá»± bÃ¹ng ná»• Internet Ä‘áº¿n thá»i Ä‘iá»ƒm hiá»‡n táº¡i khiáº¿n cho tÃ i nguyÃªn Ipv4 Ä‘Æ°á»£c sá»­ dá»¥ng gáº§n nhÆ° lÃ  cáº¡n kiá»‡n. ChÃ­nh vÃ¬ nhá»¯ng háº¡n cháº¿ nhÆ° váº­y. CÃ¡c nhÃ  nghiÃªn cá»©u Ä‘Ã£ cho ra Ä‘á»i giao thá»©c IP tháº¿ há»‡ má»›i. IPv6!

## IPv6

**IPv6 hay Internet Protocol version 6** lÃ  phiÃªn báº£n phá»• biáº¿n thá»© 2 sau IPv4. NÃ³ Ä‘Æ°á»£c coi lÃ  tÆ°Æ¡ng lai cá»§a giao thá»©c IP khi mÃ  trong hoÃ n cáº£nh IPv4 náº£y sinh nhiá»u háº¡n cháº¿. MÃ  táº¡i sao láº¡i khÃ´ng pháº£i lÃ  IPv5? Äiá»u gÃ¬ Ä‘Ã£ xáº£y ra vá»›i IPv5? LÃ½ do chÃ­nh mÃ  IPv5 bá»‹ loáº¡i bá» lÃ  do nÃ³ cÅ©ng sá»­ dá»¥ng 32 bit Ä‘á»ƒ biá»ƒu diá»…n Ä‘á»‹a chá»‰ - nhÆ°á»£c Ä‘iá»ƒm lá»›n nháº¥t cá»§a IPv4. IPv6 cÃ³ tá»›i 128 bit biá»ƒu diá»…n Ä‘á»‹a chá»‰, tá»©c lÃ  má»™t sá»‘ lÆ°á»£ng Ä‘á»‹a chá»‰ IP ráº¥t lá»›n lÃªn tá»›i ~340 x 10^36. ÄÃ¢y lÃ  má»™t con sá»‘ mÃ  á»Ÿ thá»i Ä‘iá»ƒm hiá»‡n táº¡i thÃ¬ nÃ³ gáº§n nhÆ° lÃ  vÃ´ háº¡n. 

![image](https://user-images.githubusercontent.com/79156398/163725133-ab808f1a-ab5f-40e7-895b-7501a3eb249c.png)

Cáº¥u trÃºc Frame cá»§a IPv6 cÅ©ng cÃ³ má»™t sá»‘ thay Ä‘á»•i so vá»›i IPv4. LÆ°u Ã½ ráº±ng tiÃªu Ä‘á» IPv6 cÃ³ Ã­t trÆ°á»ng hÆ¡n, Ä‘iá»u nÃ y lÃ m cho nÃ³ hiá»‡u quáº£ hÆ¡n vÃ  xá»­ lÃ½ nhanh hÆ¡n. Má»™t Æ°u Ä‘iá»ƒm lá»›n khÃ¡c lÃ  Ä‘á»™ dÃ i tiÃªu Ä‘á» lÃ  kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh 40 byte, so vá»›i kÃ­ch thÆ°á»›c Ä‘á»™ dÃ i thay Ä‘á»•i cá»§a tiÃªu Ä‘á» IPv4.

Trong Ä‘Ã³ : 

- **Version** :
TrÆ°á»ng **Version** lÃ  sá»‘ nháº­n dáº¡ng phiÃªn báº£n cá»§a giao thá»©c IP. NÃ³ Ä‘Æ°á»£c Ä‘áº·t thÃ nh 4-bit trong IPv4 vÃ  6-bit trong IPv6.
- **Traffic Class** : Thá»±c hiá»‡n chá»©c nÄƒng tÆ°Æ¡ng tá»± trÆ°á»ng "Service Type" cá»§a Ä‘á»‹a chá»‰ IPv4. TrÆ°á»ng nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ biá»ƒu diá»…n má»©c Æ°u tiÃªn cá»§a gÃ³i tin. Node gá»­i gÃ³i tin cáº§n thiáº¿t láº­p giÃ¡ trá»‹ phÃ¢n loáº¡i Ä‘á»™ Æ°u tiÃªn nháº¥t Ä‘á»‹nh cho gÃ³i tin IPv6, sá»­ dá»¥ng trÆ°á»ng Traffic Class.
- **Flow Label** : TrÆ°á»ng Flow Label sá»­ dá»¥ng Ä‘á»ƒ Ä‘á»‹nh danh má»™t dÃ²ng dá»¯ liá»‡u giá»¯a nguá»“n vÃ  Ä‘Ã­ch. Flow Label Ä‘Æ°á»£c sá»­ dá»¥ng trong IPv6 sáº½ há»— trá»£ tá»‘t hÆ¡n thá»±c thi QoS.
> KhÃ¡i niá»‡m Flow : 
- **Payload Length** : Äá»™ dÃ i Payload
- **Next Header** : TÆ°Æ¡ng tá»± trÆ°á»ng Protocol trong IPv4.

Má»™t sá»‘ giÃ¡ trá»‹ phá»• biáº¿n nháº¥t Ä‘Æ°á»£c hiá»ƒn thá»‹ trong báº£ng dÆ°á»›i Ä‘Ã¢y.

| GiÃ¡ trá»‹ Next Header (báº±ng hex) | Giao thá»©c |
| -- | -- |
|6|TCP|
|11|UDP|
|2F|GRE|
|32|ESP|
|3A|ICMPv6|
|3B|None|
|59|OSPF|

- **Hop Limit** : TÆ°Æ¡ng tá»± trÆ°á»ng **Time to Live** trong IPv4
- **Source Address** : Äá»‹a chá»‰ nguá»“n
- **Destination Address**: Äá»‹a chá»‰ Ä‘Ã­ch

### Biá»ƒu diá»…n Ä‘á»‹a chá»‰ IPv6

Äá»‹a chá»‰ IPv6 dÃ i 128 bit, Ä‘Æ°á»£c chia lÃ m 8 nhÃ³m, má»—i nhÃ³m gá»“m 16 bit, Ä‘Æ°á»£c ngÄƒn cÃ¡ch vá»›i nhau báº±ng dáº¥u hai cháº¥m â€œ:â€. Má»—i nhÃ³m Ä‘Æ°á»£c biá»ƒu diá»…n báº±ng 4 sá»‘ hexa. VÃ­ dá»¥: 
~~~
FEDC:BA98:768A:0C98:FEBA:CB87:7678:1111  
1080:0000:0000:0070:0000:0989:CB45:345F
~~~

![image](https://user-images.githubusercontent.com/79156398/163725101-13e9ea14-6f80-4c12-813a-23c8e8a54e8d.png)

8 octet chia lÃ m 3 pháº§n: 3+1+4 (Siteprefix + Subnet ID + Interface ID)

### Quy táº¯c viáº¿t rÃºt gá»n

Nhá»¯ng Ä‘á»‹a chá»‰ IPv6 lá»›n, kháº£ nÄƒng cung cáº¥p Ä‘á»‹a chá»‰ cho nhiá»u node vÃ  cung cáº¥p cáº¥u trÃºc phÃ¢n cáº¥p linh hoáº¡t, nhÆ°ng nÃ³ khÃ´ng dá»… Ä‘á»ƒ viáº¿t ra. VÃ¬ váº­y cáº§n cÃ³ 1 sá»‘ nguyÃªn táº¯c Ä‘á»ƒ nháº±m rÃºt ngáº¯n láº¡i cÃ¡ch biá»ƒu diá»…n Ä‘á»‹a chá»‰ IPv6. Sau Ä‘Ã¢y lÃ  cÃ¡c quy táº¯c Ä‘á»ƒ rÃºt gá»n IPv6:  

- Cho phÃ©p bá» cÃ¡c sá»‘ 0 náº±m trÆ°á»›c má»—i nhÃ³m (octet).  
- Thay báº±ng sá»‘ 0 cho nhÃ³m cÃ³ toÃ n sá»‘ 0.  
- Thay báº±ng dáº¥u ``::`` cho cÃ¡c nhÃ³m liÃªn tiáº¿p nhau cÃ³ toÃ n sá»‘ 0.

VÃ­ dá»¥ vá» nÃ©n Ä‘á»‹a chá»‰ IPv6:  
Cho má»™t Ä‘á»‹a chá»‰: ``1080:0000:0000:0070:0000:0989:CB45:345F``
Dá»±a theo cÃ¡c quy táº¯c Ä‘Ã£ nÃªu trÃªn, cÃ³ thá»ƒ nÃ©n Ä‘á»‹a chá»‰ IP trÃªn nhÆ° sau: ``1080::70:0:989:CB45:345F`` hoáº·c ``1080:0:0:70::989: CB45:345F``

ChÃº Ã½: Dáº¥u ``::`` chá»‰ sá»­ dá»¥ng Ä‘Æ£á»£c 1 láº§n trong toÃ n bá»™ Ä‘á»‹a chá»‰ IPv6 (nhiá»u dáº¥u ``::`` cÃ³ thá»ƒ gÃ¢y ra sá»± nháº§m láº«n hoáº·c khÃ´ng thá»ƒ biáº¿t Ä‘Ãºng vá»‹ trÃ­ cá»§a cÃ¡c octet trong Ä‘á»‹a chá»‰ IPv6).

### Biá»ƒu diá»…n cá»§a Address Prefixes

Prefix cá»§a Ä‘á»‹a chá»‰ IPv6 Ä‘Æ°á»£c biá»ƒu diá»…n tÆ°Æ¡ng tá»± vá»›i kÃ­ hiá»‡u IPv4 CIDR. IPv6 prefix Ä‘Æ°á»£c biá»ƒu diá»…n nhÆ° sau: ``**IPv6-address/prefix-length**``

Trong Ä‘Ã³,**IPv6-address** lÃ  báº¥t kÃ¬ Ä‘á»‹a chá»‰ cÃ³ giÃ¡ trá»‹, **Prefix-length** lÃ  sá»‘ bit liá»n ká» nhau Ä‘Æ°á»£c bao gá»“m trong prefix.

VÃ­ dá»¥: Sau Ä‘Ã¢y lÃ  quy táº¯c biá»ƒu diá»…n cho 56 bit prefix 
``200F00000000AB:`` 
``200F::AB00:0:0:0:0/56``  
``200F:0:0:AB00::/56``

ChÃº Ã½ vá»›i Ä‘á»‹a chá»‰ IPv6, kÃ­ hiá»‡u ``::`` Ä‘Æ°á»£c sá»­ dá»¥ng 1 láº§n duy nháº¥t trong má»—i sá»± biá»ƒu diá»…n. Äiá»u quan trá»ng nÃªn pháº£i nÃ³i láº§n 2.

Theo sau lÃ  cÃ¡c cÃ¡ch biá»ƒu diá»…n sai cá»§a 56 bit prefix:  
``200F:0:0:AB/56``
``200F::AB00/56``
``200F::AB/56``

CÃ¡ch biá»ƒu diá»…n Ä‘áº§u tiÃªn lÃ  khÃ´ng há»£p lá»‡ bá»Ÿi vÃ¬ cÃ¡c sá»‘ 0 theo sau trong vÃ²ng má»™t trÆ°á»ng 16-bit (``AB00``) bá»‹ máº¥t, vÃ  Ä‘á»‹a chá»‰ khÃ´ng Ä‘á»§ chiá»u dÃ i há»£p lá»‡. Äá»‹a chá»‰ IPv6 trÃªn bÃªn trÃ¡i cá»§a dáº¥u gáº¡ch chÃ©o ``/`` pháº£i lÃ  má»™t Ä‘á»‹a chá»‰ IPv6 cÃ³ chiá»u dÃ i Ä‘áº§y Ä‘á»§ hoáº·c Ä‘Æ°á»£c nÃ©n há»£p lá»‡. CÃ¡ch biá»ƒu diá»…n thá»© hai vÃ  thá»© ba lÃ  Ä‘á»‹a chá»‰ IPv6 Ä‘Æ°á»£c nÃ©n há»£p lá»‡ nhÆ°ng nÃ³ khÃ´ng giÃ£n ra thÃ nh Ä‘á»‹a chá»‰ chÃ­nh xÃ¡c. Thay vÃ¬ ``200F:0000:0000:AB00:0000:0000:0000:0000`` nÃ³ sáº½ giÃ£n thÃ nh ``200F:0000:0000:0000:0000:0000:0000:AB00`` vÃ  ``200F:0000: 0000:0000:0000:0000:0000:00AB`` tÆ°Æ¡ng á»©ng.

### PhÃ¢n loáº¡i Ä‘á»‹a chá»‰ IPv6

CÃ³ 3 loáº¡i Ä‘á»‹a chá»‰ IPv6 :

- **Unicast**
- **Multicast**
- **Broadcast**

### Lá»£i tháº¿ cá»§a IPv6

Do thiáº¿t káº¿, IPv6 sáº½ mang láº¡i cho ta nhá»¯ng lá»£i Ã­ch sau: 
- Loáº¡i bá» hoÃ n toÃ n giao thá»©c NAT.
- KhÃ´i phá»¥c láº¡i nguyÃªn lÃ½ káº¿t ná»‘i end-end cá»§a internet.
- TÄƒng dung lÆ°á»£ng Ä‘á»‹a chá»‰ IP.
- Cáº¥u trÃºc Ä‘á»‹nh tuyáº¿n tá»‘t hÆ¡n do IPV6 Ä‘Æ°á»£c thiáº¿t káº¿ hoÃ n toÃ n phÃ¢n cáº¥p.
- Quáº£n trá»‹ TCP/IP tá»‘t hÆ¡n do khÃ´ng cáº§n DHCP vÃ  cÃ¡c cáº¥u hÃ¬nh thá»§ cÃ´ng.
- Há»— trá»£ báº£o máº­t tá»‘t hÆ¡n.

---> Giáº£m Ä‘á»™ phá»©c táº¡p, tÄƒng tÃ­nh báº£o máº­t.
 
 TrÃªn Ä‘Ã¢y lÃ  má»™t sá»‘ kiáº¿n thá»©c vá» giao thá»©c **Internet Protocol** mÃ  mÃ¬nh Ä‘Ã£ tá»•ng há»£p. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i vÃ  hÃ£y ``Pull request`` náº¿u bÃ i viáº¿t cÃ³ lá»—i gÃ¬ nhÃ©!
